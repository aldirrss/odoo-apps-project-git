<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="project_task_view_form_inherit" model="ir.ui.view">
            <field name="name">project.task.form.inherit.github.repo</field>
            <field name="model">project.task</field>
            <field name="inherit_id" ref="project.view_task_form2"/>
            <field name="arch" type="xml">
                <xpath expr="//header" position="inside">
                    <button name="action_create_github_issue" type="object" string="Create Issue"
                            invisible="auto_create_issues or not repository_id"
                            groups="lm_project_github.group_git_integration"/>
                    <button name="action_update_github_issue" type="object" string="Update Issue"
                            invisible="not github_issue_number or auto_update_issues or not repository_id"
                            groups="lm_project_github.group_git_integration"/>
                    <button name="action_create_branch" type="object" string="Create Branch"
                            invisible="not repository_id or branch_id"
                            groups="lm_project_github.group_git_integration"/>
                    <button name="action_delete_branch" type="object" string="Delete Branch"
                            invisible="not branch_id"
                            groups="lm_project_github.group_git_integration"/>
                    <button name="action_create_pull_request" type="object" string="Create PR"
                            invisible="not branch_id or pull_request_number"
                            groups="lm_project_github.group_git_integration"/>
                    <button name="action_merge_pull_request" type="object" string="Merge PR"
                            invisible="not pull_request_number or pull_request_merged"
                            groups="lm_project_github.group_git_integration"/>
                </xpath>
                <xpath expr="//div[@name='button_box']" position="inside">
                    <button class="oe_stat_button" type="object"
                            name="action_open_github_issue" icon="fa-github"
                            groups="lm_project_github.group_git_integration"
                            invisible="not github_issue_url or not repository_id">
                        <div class="o_field_widget o_stat_info">
                            <span class="o_stat_text">GitHub Issue</span>
                        </div>
                    </button>
                    <button class="oe_stat_button" type="object"
                            name="action_open_pull_request" icon="fa-code-fork"
                            groups="lm_project_github.group_git_integration"
                            invisible="not pull_request_url or not repository_id">
                        <div class="o_field_widget o_stat_info">
                            <span class="o_stat_text">Pull Request</span>
                        </div>
                    </button>
                </xpath>
                <xpath expr="//page[@name='extra_info']" position="inside">
                    <group>
                        <group string="GitHub Info" groups="lm_project_github.group_git_integration">
                            <field name="repository_id"/>
                            <field name="branch_id" readonly="1"/>
                        </group>
                    </group>
                </xpath>
            </field>
        </record>
    </data>
</odoo>